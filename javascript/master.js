// [AIV_SHORT]  Build version: 0.0.37 - Tuesday, April 28th, 2020, 11:03:47 PM  
 !function(t){var e={};function i(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(o,r,function(e){return t[e]}.bind(null,r));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e){function i(t,e){void 0===e&&(e=[]);var i="";for(var o in e)i+=","+o.toString();i=i.substring(1),console.log(t+"("+i+")")}new(function(){function t(t,e,o){i("Minesweeper Constructor",[t,e,o]),this.mode=1,this.rows=t,this.cols=e,this.mines=o,this.field=[],this.game_wrapper=document.getElementById("game");for(var r=0,n=0,s=this.mines;n<this.rows;){for(;r<this.cols;){var l=!1;s>0&&(this.randomBool(33)||this.rows*this.cols-(n*this.rows+r)===s)&&(l=!0,s--),this.field.push({x:r,y:n,mine:l,searched:!1});var c=document.createElement("div");c.classList.add("block"),c.setAttribute("data-x",r.toString()),c.setAttribute("data-y",n.toString()),this.game_wrapper.appendChild(c),r++}r=0,n++}this.setupEventHandlers()}return t.prototype.randomBool=function(t){return void 0===t&&(t=50),!!(100*Math.random()<=t)},t.prototype.setupEventHandlers=function(){for(var t=this,e=document.querySelectorAll(".block"),i=0;i<e.length;)e[i].addEventListener("click",(function(e){t.clickedBlock(e)})),i++},t.prototype.clickedBlock=function(t){i("clickedBlock");t.target;var e=this.getTileId(parseInt(t.target.getAttribute("data-x")),parseInt(t.target.getAttribute("data-y")));if(this.selectedTile=this.field[e],1===this.mode){if(this.selectedTile.mine)return void this.clickedMine();t.target.innerHTML=this.searchSurroundingTiles(e).toString()}},t.prototype.getTileId=function(t,e){return e*this.rows+t},t.prototype.clickedMine=function(){i("clickedMine"),alert("You Lose!")},t.prototype.searchSurroundingTiles=function(t){i("searchSurroundingTiles");var e=0;return t%this.cols!=0&&this.field[t-1].mine&&e++,t%this.cols!=this.cols-1&&this.field[t+1].mine&&e++,t>this.cols&&(this.field[t-this.cols].mine&&e++,t%this.cols!=0&&this.field[t-this.cols-1].mine&&e++,t%this.cols!=this.cols-1&&this.field[t-this.cols-1].mine&&e++),t<this.rows*this.cols-this.cols&&(this.field[t+this.cols].mine&&e++,t%this.cols!=0&&this.field[t+this.cols-1].mine&&e++,t%this.cols!=this.cols-1&&this.field[t+this.cols+1].mine&&e++),e},t}())(10,10,30)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vdHlwZXNjcmlwdC9tYXN0ZXIudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJmIiwiZnVuY3Rpb25fbmFtZSIsInBhcmFtcyIsInBhcmFtX2xpc3QiLCJwYXJhbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiY29uc29sZSIsImxvZyIsIk1pbmVzd2VlcGVyIiwicm93cyIsImNvbHMiLCJtaW5lcyIsInRoaXMiLCJmaWVsZCIsImdhbWVfd3JhcHBlciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ4IiwieSIsIm1pbmVzX2xlZnQiLCJtaW5lIiwicmFuZG9tQm9vbCIsInB1c2giLCJzZWFyY2hlZCIsImJsb2NrIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIiwic2V0dXBFdmVudEhhbmRsZXJzIiwiY2hhbmNlIiwiTWF0aCIsInJhbmRvbSIsIl90aGlzIiwiYmxvY2tzIiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImNsaWNrZWRCbG9jayIsInRhcmdldCIsImlkIiwiZ2V0VGlsZUlkIiwicGFyc2VJbnQiLCJnZXRBdHRyaWJ1dGUiLCJzZWxlY3RlZFRpbGUiLCJjbGlja2VkTWluZSIsImlubmVySFRNTCIsInNlYXJjaFN1cnJvdW5kaW5nVGlsZXMiLCJhbGVydCIsInRpbGVJZCIsInJlc3VsdCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNELEVBQU9FLEdBRXZDLEdBRFUsRUFBUEEsSUFBVUYsRUFBUXJCLEVBQW9CcUIsSUFDL0IsRUFBUEUsRUFBVSxPQUFPRixFQUNwQixHQUFXLEVBQVBFLEdBQThCLGlCQUFWRixHQUFzQkEsR0FBU0EsRUFBTUcsV0FBWSxPQUFPSCxFQUNoRixJQUFJSSxFQUFLWCxPQUFPWSxPQUFPLE1BR3ZCLEdBRkExQixFQUFvQmtCLEVBQUVPLEdBQ3RCWCxPQUFPQyxlQUFlVSxFQUFJLFVBQVcsQ0FBRVQs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ci5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIi8vIENvbXBpbGUgU2V0dGluZ3NcclxudmFyIGRlYnVnID0gdHJ1ZTtcclxuLy8gTW9kZXNcclxudmFyIFNFQVJDSCA9IDE7XHJcbnZhciBGTEFHID0gMjtcclxuLy8gLS0tLS0tLS0tLS0tLS0gR0FNRSBDTEFTUyAtLS0tLS0tLS0tLS0tLS0tLS0gLy9cclxudmFyIE1pbmVzd2VlcGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTWluZXN3ZWVwZXIocm93cywgY29scywgbWluZXMpIHtcclxuICAgICAgICBmKFwiTWluZXN3ZWVwZXIgQ29uc3RydWN0b3JcIiwgW3Jvd3MsIGNvbHMsIG1pbmVzXSk7XHJcbiAgICAgICAgdGhpcy5tb2RlID0gU0VBUkNIO1xyXG4gICAgICAgIHRoaXMucm93cyA9IHJvd3M7XHJcbiAgICAgICAgdGhpcy5jb2xzID0gY29scztcclxuICAgICAgICB0aGlzLm1pbmVzID0gbWluZXM7XHJcbiAgICAgICAgdGhpcy5maWVsZCA9IFtdO1xyXG4gICAgICAgIHRoaXMuZ2FtZV93cmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnYW1lXCIpO1xyXG4gICAgICAgIHZhciB4ID0gMDtcclxuICAgICAgICB2YXIgeSA9IDA7XHJcbiAgICAgICAgdmFyIG1pbmVzX2xlZnQgPSB0aGlzLm1pbmVzO1xyXG4gICAgICAgIC8vIEJ1aWxkIEdyaWQuLlxyXG4gICAgICAgIHdoaWxlICh5IDwgdGhpcy5yb3dzKSB7XHJcbiAgICAgICAgICAgIHdoaWxlICh4IDwgdGhpcy5jb2xzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWluZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1pbmVzX2xlZnQgPiAwICYmICh0aGlzLnJhbmRvbUJvb2woMzMpIHx8ICgodGhpcy5yb3dzICogdGhpcy5jb2xzKSAtICgoeSAqIHRoaXMucm93cykgKyB4KSkgPT09IG1pbmVzX2xlZnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluZXNfbGVmdC0tO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5maWVsZC5wdXNoKHsgeDogeCwgeTogeSwgbWluZTogbWluZSwgc2VhcmNoZWQ6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgICAgIGJsb2NrLmNsYXNzTGlzdC5hZGQoXCJibG9ja1wiKTtcclxuICAgICAgICAgICAgICAgIGJsb2NrLnNldEF0dHJpYnV0ZSgnZGF0YS14JywgeC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIGJsb2NrLnNldEF0dHJpYnV0ZSgnZGF0YS15JywgeS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZV93cmFwcGVyLmFwcGVuZENoaWxkKGJsb2NrKTtcclxuICAgICAgICAgICAgICAgIHgrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB4ID0gMDtcclxuICAgICAgICAgICAgeSsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL3YodGhpcy5maWVsZCk7XHJcbiAgICAgICAgdGhpcy5zZXR1cEV2ZW50SGFuZGxlcnMoKTtcclxuICAgIH1cclxuICAgIE1pbmVzd2VlcGVyLnByb3RvdHlwZS5yYW5kb21Cb29sID0gZnVuY3Rpb24gKGNoYW5jZSkge1xyXG4gICAgICAgIGlmIChjaGFuY2UgPT09IHZvaWQgMCkgeyBjaGFuY2UgPSA1MDsgfVxyXG4gICAgICAgIHZhciByID0gISEoKE1hdGgucmFuZG9tKCkgKiAxMDApIDw9IGNoYW5jZSk7XHJcbiAgICAgICAgcmV0dXJuIHI7XHJcbiAgICB9O1xyXG4gICAgTWluZXN3ZWVwZXIucHJvdG90eXBlLnNldHVwRXZlbnRIYW5kbGVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBibG9ja3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYmxvY2snKTtcclxuICAgICAgICB2YXIgYyA9IDA7XHJcbiAgICAgICAgd2hpbGUgKGMgPCBibG9ja3MubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGJsb2Nrc1tjXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkgeyBfdGhpcy5jbGlja2VkQmxvY2soZXZlbnQpOyB9KTtcclxuICAgICAgICAgICAgYysrO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBNaW5lc3dlZXBlci5wcm90b3R5cGUuY2xpY2tlZEJsb2NrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZihcImNsaWNrZWRCbG9ja1wiKTtcclxuICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgIHZhciBpZCA9IHRoaXMuZ2V0VGlsZUlkKHBhcnNlSW50KGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEteCcpKSwgcGFyc2VJbnQoZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS15JykpKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkVGlsZSA9IHRoaXMuZmllbGRbaWRdO1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGUgPT09IFNFQVJDSCkge1xyXG4gICAgICAgICAgICAvLyBjaGVjayBpZiB3ZSBjbGlja2VkIGEgbWluZS4uXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVGlsZS5taW5lKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWNrZWRNaW5lKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmlubmVySFRNTCA9IHRoaXMuc2VhcmNoU3Vycm91bmRpbmdUaWxlcyhpZCkudG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTWluZXN3ZWVwZXIucHJvdG90eXBlLmdldFRpbGVJZCA9IGZ1bmN0aW9uICh4LCB5KSB7XHJcbiAgICAgICAgcmV0dXJuICh5ICogdGhpcy5yb3dzKSArIHg7XHJcbiAgICB9O1xyXG4gICAgTWluZXN3ZWVwZXIucHJvdG90eXBlLmNsaWNrZWRNaW5lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGYoXCJjbGlja2VkTWluZVwiKTtcclxuICAgICAgICBhKFwiWW91IExvc2UhXCIpO1xyXG4gICAgfTtcclxuICAgIE1pbmVzd2VlcGVyLnByb3RvdHlwZS5zZWFyY2hTdXJyb3VuZGluZ1RpbGVzID0gZnVuY3Rpb24gKHRpbGVJZCkge1xyXG4gICAgICAgIGYoXCJzZWFyY2hTdXJyb3VuZGluZ1RpbGVzXCIpO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSAwO1xyXG4gICAgICAgIC8vIGxlZnRcclxuICAgICAgICBpZiAodGlsZUlkICUgdGhpcy5jb2xzICE9PSAwKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZpZWxkW3RpbGVJZCAtIDFdLm1pbmUpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHJpZ2h0XHJcbiAgICAgICAgaWYgKHRpbGVJZCAlIHRoaXMuY29scyAhPT0gKHRoaXMuY29scyAtIDEpKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZpZWxkW3RpbGVJZCArIDFdLm1pbmUpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vdG9wXHJcbiAgICAgICAgaWYgKHRpbGVJZCA+IHRoaXMuY29scykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5maWVsZFt0aWxlSWQgLSB0aGlzLmNvbHNdLm1pbmUpIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHRvcCBsZWZ0XHJcbiAgICAgICAgICAgIGlmICh0aWxlSWQgJSB0aGlzLmNvbHMgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpZWxkW3RpbGVJZCAtIHRoaXMuY29scyAtIDFdLm1pbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL3RvcCByaWdodFxyXG4gICAgICAgICAgICBpZiAodGlsZUlkICUgdGhpcy5jb2xzICE9PSAodGhpcy5jb2xzIC0gMSkpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpZWxkW3RpbGVJZCAtIHRoaXMuY29scyAtIDFdLm1pbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBib3R0b21cclxuICAgICAgICBpZiAodGlsZUlkIDwgKHRoaXMucm93cyAqIHRoaXMuY29scykgLSB0aGlzLmNvbHMpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZmllbGRbdGlsZUlkICsgdGhpcy5jb2xzXS5taW5lKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBib3R0b20gbGVmdFxyXG4gICAgICAgICAgICBpZiAodGlsZUlkICUgdGhpcy5jb2xzICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5maWVsZFt0aWxlSWQgKyB0aGlzLmNvbHMgLSAxXS5taW5lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gYm90dG9tIHJpZ2h0XHJcbiAgICAgICAgICAgIGlmICh0aWxlSWQgJSB0aGlzLmNvbHMgIT09ICh0aGlzLmNvbHMgLSAxKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmllbGRbdGlsZUlkICsgdGhpcy5jb2xzICsgMV0ubWluZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1pbmVzd2VlcGVyO1xyXG59KCkpO1xyXG4vLyAtLS0tLS0tLS0tLS0tLSBERUJVRyBGVU5DVElPTlMgLS0tLS0tLS0tLS0tLS0tLS0tIC8vXHJcbmZ1bmN0aW9uIGYoZnVuY3Rpb25fbmFtZSwgcGFyYW1zKSB7XHJcbiAgICBpZiAocGFyYW1zID09PSB2b2lkIDApIHsgcGFyYW1zID0gW107IH1cclxuICAgIHZhciBwYXJhbV9saXN0ID0gXCJcIjtcclxuICAgIGZvciAodmFyIHBhcmFtIGluIHBhcmFtcykge1xyXG4gICAgICAgIHBhcmFtX2xpc3QgKz0gXCIsXCIgKyBwYXJhbS50b1N0cmluZygpO1xyXG4gICAgfVxyXG4gICAgcGFyYW1fbGlzdCA9IHBhcmFtX2xpc3Quc3Vic3RyaW5nKDEpO1xyXG4gICAgY29uc29sZS5sb2coZnVuY3Rpb25fbmFtZSArIFwiKFwiICsgcGFyYW1fbGlzdCArIFwiKVwiKTtcclxufVxyXG5mdW5jdGlvbiBhKG1lc3NhZ2UpIHtcclxuICAgIGFsZXJ0KG1lc3NhZ2UpO1xyXG59XHJcbmZ1bmN0aW9uIG0obWVzc2FnZSkge1xyXG4gICAgY29uc29sZS5sb2cobWVzc2FnZSk7XHJcbn1cclxuZnVuY3Rpb24gdih2YXJpYWJsZSkge1xyXG4gICAgY29uc29sZS5sb2codmFyaWFibGUpO1xyXG59XHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gbmV3IE1pbmVzd2VlcGVyKDEwLCAxMCwgMzApO1xyXG59KSgpO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9 